# 如何在Main中获取上下文?
>
> 有时候我们希望能够哎Main 中获取AppModule 的上下文，为此你可以这样写

```ts
const app = await NestFactory.createApplicationContext(AppModule);
// 如果你想获取 AppModule 上下文 可以直接 （注意我们看下面的例子 ConfigService是 在AppModule 以及注册过的）
const configService = app.get(ConfigService) as ConfigService;

const tasksService = app.select(TasksModule).get(TasksService, { strict: true });

```

# 关于CLI
>
> 我们从一开始都全部都爱使用 Nest提供的CLI 不管是创建项目骨架还是各个模块都是用的它，实际上你可以单独的使用 nest不一定需要使用他的 CLI，主要还是看 实际的需求，在Newegg 我们更多的并不是依赖Nest的CLI .

> 从便利程度来看 使用Nest CLI 效率是有一定提升的，特别是对于一般的需求而言

## 简单的了解一下
>
> 我们看看 简单的一些命令 (ng 即视感)

### 简单的用一下

我们可以使用 npx 或者 npm 或者 yarn全局安装 这个CLI

```shell
$ npm install -g @nestjs/cli

# 查看帮助
$ nest --help

# 生成器 
$ nest generate --help

# 下面是一个简单的创建的模板项目的命令 (标准模式)
$ nest new my-nest-project
```

### 关于工程结构和设计

关于项目的工程结构，一般而言 nest new 我们仅面对的是 一个 “标准工程”，不过Nest CLI 还提支持其他的工程管理模式，比如  *Multiple projects* *Lib库* 他们是用大多数情况下使用 monorepo来管理的。

下面是一些摘要, 我们展示了不同工程管理模式下的 异同

|  工程设置  | 标准模式 | Monorepo模式 |
| ---- | ---- | ---- |
|  Multiple projects  | 分开文件系统结构 | 单个文件系统结构 |
|  node_modules & package.json  | 单独的实例  | 可以允许部分依赖互相引用和模块共享  |
|  默认的编译器  | tsc | webpack |
|  编译设置  | 单独指定 | 每个项目可以自定义  |
|  Config files like , , etc..eslintrc.js.prettierrc  | 单独指定 | 每个项目可以自定义 |
|  nest build and commandsnest start  | 目标自动默认为上下文中的（仅）项目 | 目标默认为单存储库中的默认项目 |
|  Libraries  | 手动管理，通常通过 npm 打包 内置支持 | 内置支持，包括路径管理和Bundle |

看起来有点迷糊我们一会儿实际上来看看就晓得了

### CLI的一些基本的指令

```shell
# 大部分情况下 都遵循下面的 👇的规范
$ nest commandOrAlias requiredArg [optionalArg] [options]

# 比如这个 表示创建项目 然后去run一下 
$ nest new my-nest-project --dry-run

# 我们还有一些缩写形式 比如
$ nest n my-nest-project -d

# 如果你不知道 某个命令的别名 请使用 
$ nest new --help

```

## WorkSpace
>
> 本小节我们来 分析一下 Nestjs 的 CLI生成的项目的骨架 的这些目录和其具体作用，以及mono repo模式下下的工程结构和其说明

### 该书

一般而言在Nest中我们有两种模式来组织代码 ( 标准模式 和 mono repo模式 ), 所谓的标准模式 就是Nest CLI 直接New 的那种，比较适合小型项目。mono repo模式问就不详细讲了，Nest CLI 提供了 使用CLI 命令直接生成monorepo 结构的指令很方便，适合相对复杂的项目。

### monorepo模式

我们需要按照下面的步骤一步一步 的生成这样的项目结构

```shell
# 先生成 标准模式项目

# 然后用 CLI 去生存 mono repo 需要的子项目

# 
```

## Libraire

## 命令行参考

## run？
